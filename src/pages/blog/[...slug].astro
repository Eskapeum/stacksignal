---
import Layout from '../../layouts/Layout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await render(post);
---

<Layout title={`${post.data.title} | StackSignal`} description={post.data.description}>
  <!-- Article Header -->
  <header class="bg-[#0F172A] text-white py-16">
    <div class="max-w-4xl mx-auto px-4">
      <div class="flex items-center gap-3 mb-4">
        <a href="/blog" class="text-slate-400 hover:text-white transition-colors">
          <i class="fa-solid fa-arrow-left mr-2"></i>Back to Blog
        </a>
      </div>
      <div class="flex items-center gap-3 mb-4">
        <span class="bg-[#3B82F6] text-white text-xs px-3 py-1 rounded font-mono capitalize">
          {post.data.category}
        </span>
        <span class="text-slate-400 text-sm">
          <i class="fa-regular fa-clock mr-1"></i>{post.data.readTime}
        </span>
      </div>
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-6 leading-tight text-white">
        {post.data.title}
      </h1>
      <div class="flex items-center gap-4 text-slate-400 text-sm">
        <span>
          <i class="fa-solid fa-user mr-2"></i>{post.data.author}
        </span>
        <span>
          <i class="fa-solid fa-calendar mr-2"></i>
          {post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
        </span>
      </div>
    </div>
  </header>

  <!-- Article Content -->
  <article class="py-16 bg-white">
    <div class="max-w-3xl mx-auto px-4">
      <div class="article-content">
        <Content />
      </div>
    </div>
  </article>

  <style>
    .article-content {
      font-size: 1.125rem;
      line-height: 1.75;
      color: #475569;
    }
    .article-content h1 {
      font-size: 1.875rem;
      font-weight: 700;
      color: #0F172A;
      margin-bottom: 1rem;
      margin-top: 2rem;
      font-family: system-ui, -apple-system, sans-serif;
    }
    .article-content h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: #0F172A;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      font-family: system-ui, -apple-system, sans-serif;
    }
    .article-content h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #0F172A;
      margin-top: 2rem;
      margin-bottom: 0.75rem;
      font-family: system-ui, -apple-system, sans-serif;
    }
    .article-content p {
      margin-bottom: 1.25rem;
      line-height: 1.8;
    }
    .article-content strong {
      font-weight: 700;
      color: #0F172A;
    }
    .article-content a {
      color: #3B82F6;
      text-decoration: none;
    }
    .article-content a:hover {
      text-decoration: underline;
    }
    .article-content ul, .article-content ol {
      margin-bottom: 1.25rem;
      padding-left: 1.5rem;
    }
    .article-content li {
      margin-bottom: 0.5rem;
    }
    .article-content blockquote {
      border-left: 4px solid #3B82F6;
      padding-left: 1rem;
      margin: 1.5rem 0;
      font-style: italic;
      color: #64748B;
    }
    .article-content code {
      background-color: #F1F5F9;
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
      color: #3B82F6;
    }
    .article-content pre {
      background-color: #0F172A;
      color: #F1F5F9;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin: 1.5rem 0;
    }
  </style>

  <!-- Author/Share Section -->
  <section class="py-12 bg-[#F1F5F9]">
    <div class="max-w-3xl mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-[#0F172A] rounded-full flex items-center justify-center">
            <i class="fa-solid fa-signal text-[#3B82F6]"></i>
          </div>
          <div>
            <p class="font-bold text-[#0F172A]">StackSignal</p>
            <p class="text-sm text-slate-500">Signal over noise.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>
